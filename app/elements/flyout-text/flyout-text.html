<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="flyout-text">
	<template>
		<style include="shared-styles"></style>
		<style>
			:host {
				display: block;
			}
			
			section {
				overflow: hidden;
				white-space: nowrap;
				text-overflow: ellipsis;
			}
			
			div {
				font-size: 24px;
				font-weight: 600;
				/* Required for main area's paper-scroll-header-panel custom condensing transformation */
				-webkit-transform-origin: left center;
				transform-origin: left center;
				text-transform: uppercase;
			}
		</style>

		<section id="container">
			<div id="old">[[oldText]]</div>
			<div id="new">[[text]]</div>
		</section>
	</template>

	<script>
		var _loaded;
		
		Polymer({
			is: 'flyout-text',		
			behaviors: [ Polymer.NeonAnimationRunnerBehavior ],
		
			properties: {
				animationConfig: {
					value: function () {
						return {
							'flyout': [{
								name: 'slide-up-animation',
								node: this.$.old }, {
								name: 'slide-up-animation',
								node: this.$.new
							}]
						};
					}
				},
	
				text: {
					type: String,
					observer: '_textChanged'
				},
	
				oldText: {
					type: String,
					readonly: true
				},
				
				initialText: {
					type: String,
					value: 'welcome!'
				}
			},
			
			ready: function () {
				this.oldText = this.initialText;	
			},
			
			attached: function () {
				// restraint the height of this element
				var height = this.$.old.clientHeight;
				this.$.container.style.height = height + 'px';
			},
			
			listeners: {
				'neon-animation-finish': '_onNeonAnimationFinish'
			},
			
			_onNeonAnimationFinish: function () {
				this.oldText = this.text;
			},
		
			_textChanged: function() {
				var ms = 0;
				if (!_loaded) {
					ms = 2000;
					_loaded = true;
				}
				
				this.async(function () {
					this.playAnimation('flyout');
				}, ms);
			}
		});
	</script>

	<!--<script src="flyout-text.js"></script>-->
</dom-module>